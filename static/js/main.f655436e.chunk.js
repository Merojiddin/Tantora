(this["webpackJsonponline-exhibition"]=this["webpackJsonponline-exhibition"]||[]).push([[1],{106:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(34),r=n(107),i=new a.a({uri:r.a.backendUrl,request:function(e){var t=localStorage.getItem("authToken");e.setContext({headers:{Authorization:t?"Bearer ".concat(t):""}})}})},107:function(e,t,n){"use strict";t.a={authToken:Object({NODE_ENV:"production",PUBLIC_URL:"/Tantora",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_AUTH_TOKEN||"",chatUrl:Object({NODE_ENV:"production",PUBLIC_URL:"/Tantora",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_CHAT_URL||"https://tantora.io/api-chat",backendUrl:Object({NODE_ENV:"production",PUBLIC_URL:"/Tantora",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_BACKEND_URL||"https://tantora.io/api/graphql"}},132:function(e,t,n){"use strict";var a,r,i=n(17),o=n(44),c=n(128),l=n(179),s=n.n(l),u=n(180),b=n.n(u),h=Object(c.a)({palette:{primary:s.a,secondary:b.a,common:{white:"#fff",blue:"#1B70BE",grey:"#757575",lightGrey:"#EFF4F8",lighterGrey:"#858585",ultraLightGrey:"#BCCFE1",ultraLightGrey2:"#8A9CAD",ultraLightGrey3:"#C5C5C5",roundGrey:"#DCE8F2",grey2:"#97A4AF",black:"#000000",green:"#1BBE61",whiteGrey:"#E3E8ED",darkBlue:"#212D37"}}});h=Object(o.a)(Object(o.a)({},h),{},{breakpoints:Object(o.a)(Object(o.a)({},h.breakpoints),{},{values:{xs:480,sm:600,md:960,lg:1180,xl:1920}}),mixins:Object(o.a)(Object(o.a)({},h.mixins),{},{container:(a={display:"flex",alignItems:"center",justifyContent:"center",width:"100%",maxWidth:1180,margin:"0 auto"},Object(i.a)(a,h.breakpoints.down("md"),{padding:"0 50px"}),Object(i.a)(a,h.breakpoints.down("sm"),{padding:"0 40px"}),Object(i.a)(a,h.breakpoints.down("xs"),{padding:"0 30px"}),a),sectionPaddings:(r={padding:"111px 0"},Object(i.a)(r,h.breakpoints.down("md"),{padding:"111px 50px"}),Object(i.a)(r,h.breakpoints.down("sm"),{padding:"111px 40px"}),Object(i.a)(r,h.breakpoints.down("xs"),{padding:"111px 30px"}),r),fullPageContainer:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"calc(100vh - 64px)",padding:"150px 0"},form:{width:"100%",maxWidth:"400px",padding:"25px 50px",border:"1px solid ".concat(h.palette.divider),borderRadius:5}})}),t.a=h},153:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var a,r,i,o,c,l,s=n(21),u=n.n(s),b=n(195),h=n(38),m=n(11),p=n(32),d=n(10),f=(n(64),n(41)),g=n(7),O=n(34),j=n(46),v=n.n(j);function E(){var e=Object(f.a)(["\n  mutation($userId: String!) {\n    addToProducer(userId: $userId) {\n      status\n    }\n  }\n"]);return E=function(){return e},e}function k(){var e=Object(f.a)(["\n  mutation($userId: String!) {\n    addToAdmins(userId: $userId) {\n      status\n    }\n  }\n"]);return k=function(){return e},e}function w(){var e=Object(f.a)(["\n  mutation(\n    $userName: String!\n    $password: String!\n    $email: String!\n    $firstName: String!\n    $lastName: String!\n    $phone: String\n    $dateOfBirth: String!\n  ) {\n    createUser(\n      userName: $userName\n      password: $password\n      email: $email\n      firstName: $firstName\n      lastName: $lastName\n      phone: $phone\n      dateOfBirth: $dateOfBirth\n    ) {\n      token {\n        accessToken\n      }\n      user {\n        userId\n      }\n    }\n  }\n"]);return w=function(){return e},e}var y=Object.freeze({CLIENT:"client",PRODUCER:"producer",ORGANIZER:"organizer"}),x=Object(O.b)(w()),T=Object(O.b)(k()),S=Object(O.b)(E()),N=(a=function e(t,n){Object(p.a)(this,e),this.authStore=t,this.appClient=n,Object(m.a)(this,"loading",r,this),Object(m.a)(this,"error",i,this),Object(m.a)(this,"setLoading",o,this),Object(m.a)(this,"setError",c,this),Object(m.a)(this,"handleRegister",l,this)},r=Object(d.a)(a.prototype,"loading",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i=Object(d.a)(a.prototype,"error",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),o=Object(d.a)(a.prototype,"setLoading",[g.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.loading=t}}}),c=Object(d.a)(a.prototype,"setError",[g.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.error=t}}}),l=Object(d.a)(a.prototype,"handleRegister",[g.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(h.a)(u.a.mark((function t(n){var a,r,i,o,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n.role,r=Object(b.a)(n,["role"]),e.authStore.isAuth){t.next=27;break}return e.setLoading(!0),e.setError(null),t.prev=4,t.next=7,e.appClient.mutate({mutation:x,variables:r});case 7:if(i=t.sent,o=i.data,e.authStore.setAuthToken(v()(o,"createUser.token.accessToken")),e.authStore.setRefreshToken(v()(o,"createUser.token.refreshToken")),c=v()(o,"createUser.user.userId"),a!==y.PRODUCER){t.next=17;break}return t.next=15,e.appClient.mutate({mutation:S,variables:{userId:c}});case 15:t.next=20;break;case 17:if(a!==y.ORGANIZER){t.next=20;break}return t.next=20,e.appClient.mutate({mutation:T,variables:{userId:c}});case 20:e.setLoading(!1),t.next=27;break;case 23:t.prev=23,t.t0=t.catch(4),e.setError(t.t0),e.setLoading(!1);case 27:case"end":return t.stop()}}),t,null,[[4,23]])})));return function(e){return t.apply(this,arguments)}}()}}),a);t.b=N},203:function(e,t,n){e.exports=n(312)},208:function(e,t,n){},214:function(e,t,n){},301:function(e,t){},312:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(15),o=n.n(i),c=n(84),l=n(172),s=n(173),u=n(78);c.a.use(s.a).use(l.a).use(u.e).init({backend:{loadPath:"/locales/{{lng}}/{{ns}}.json"},whitelist:["en","cn","ru"],preload:["en","cn","ru"],fallbackLng:"en",react:{wait:!0,useSuspense:!1}});c.a,n(208);var b=n(30),h=n(367),m=n(36),p=n(59),d=n(314),f=n(43),g=n(50),O=(n(210),n(213),n(214),n(132)),j=n(85),v=n(106),E=n(62),k=n(45),w=n(44),y=n(17),x=n(21),T=n.n(x),S=n(38),N=n(52),_=n(41),C=n(34),I=n(357),z=n(115),R=n(137),A=n(186),B=n(187),L=n.n(B),U=n(362),D=n(363),P=n(113),$=n(361),W=n(364),H=n(190),K=n.n(H),F=n(368),M=n(356),G=n(72),q=Object(f.a)((function(){var e=Object(E.b)().appStore,t=J();return r.a.createElement(F.a,{className:t.select,value:e.lang,onChange:function(t){e.setLang(t.target.value)}},r.a.createElement(M.a,{value:G.a.en},"EN"),r.a.createElement(M.a,{value:G.a.ru},"\u0420\u0423"),r.a.createElement(M.a,{value:G.a.cn},"\u4e2d\u6587"))})),J=Object(d.a)((function(e){return{select:Object(y.a)({color:e.palette.common.white,marginRight:15,border:"none"},e.breakpoints.down("xs"),{fontSize:14})}})),V=q,Z=n(355),Q=n(317),Y=n(358),X=n(71),ee=n.n(X),te=[{label:"home",link:"/",icon:r.a.createElement("img",{src:ee.a,alt:"home"})},{label:"exhibitions",link:"/exhibitions",icon:""},{label:"about",link:"/about",icon:""},{label:"service",link:"/services",icon:""}],ne=Object(f.a)((function(){var e=Object(I.a)("common"),t=Object(N.a)(e,1)[0],n=ae();return r.a.createElement(Z.a,{className:n.list},te.map((function(e){var a=e.label,i=e.link;return r.a.createElement(m.b,{to:i,key:a},r.a.createElement(Q.a,{className:n.button,color:"secondary",key:a,button:!0},r.a.createElement(Y.a,{primary:t("header.".concat(a))})))})))})),ae=Object(d.a)((function(e){return{list:{display:"flex",alignItems:"center",justifyContent:"center"},button:{display:"flex",alignItems:"center",color:e.palette.common.white,marginRight:25,fontSize:38,"&:last-child":{marginRight:0}},icon:{color:e.palette.common.white,minWidth:"auto",marginRight:10}}})),re=ne,ie=n(370),oe=n(360),ce=n(359),le=Object(f.a)((function(e){var t=e.open,n=e.handleClose,a=se(),i=Object(I.a)("common"),o=Object(N.a)(i,1)[0];return r.a.createElement("div",null,r.a.createElement(ie.a,{anchor:"left",open:t,onClose:n},r.a.createElement("div",{className:a.list,role:"presentation",onClick:n,onKeyDown:n},r.a.createElement(Z.a,null,te.map((function(e){var t=e.label,n=e.link,i=e.icon;return r.a.createElement(m.b,{to:n,key:t},r.a.createElement(Q.a,{className:a.navItem,color:"secondary",key:t,button:!0},r.a.createElement(ce.a,{className:a.itemIcon},i),r.a.createElement(Y.a,{primary:o("header.".concat(t))})))}))),r.a.createElement(oe.a,null),r.a.createElement(Z.a,{className:a.signBtnsWrapper},r.a.createElement(m.b,{to:"/register",style:{textDecoration:"none"}},r.a.createElement($.a,{color:"secondary"},o("header.register"))),r.a.createElement(m.b,{to:"/login",style:{textDecoration:"none"},className:a.signBtn},r.a.createElement($.a,{color:"inherit"},o("header.sign-in")))))))})),se=Object(d.a)((function(e){return{list:{minWidth:250,height:"100%",backgroundColor:e.palette.secondary.dark},fullList:{width:"auto"},navItem:{display:"flex",alignItems:"center",color:e.palette.common.white},itemIcon:{height:30,"& > img":{height:"100%",width:"auto"}},signBtnsWrapper:{"&&":{display:"flex",alignItems:"center",justifyContent:"center"}},signBtn:{"&&":{color:e.palette.common.white}}}})),ue=le;function be(){var e=Object(_.a)(["\n  query($token: String!) {\n    logout(token: $token) {\n      deleted\n    }\n  }\n"]);return be=function(){return e},e}var he=Object(C.b)(be()),me=Object(f.a)((function(){var e=Object(I.a)("common"),t=Object(N.a)(e,1)[0],n=Object(a.useState)(!1),i=Object(N.a)(n,2),o=i[0],c=i[1],l=Object(a.useState)(!1),s=Object(N.a)(l,2),u=s[0],b=s[1],h=Object(E.b)().authStore,p=Object(z.a)(),d=pe(),f=Object(R.useMediaQuery)({query:"(max-width: 768px)"}),g=function(){var e=Object(S.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.query({query:he,variables:{token:h.authToken}});case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:p.resetStore(),h.clear();case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),O=function(e){return function(){c(e)}};return r.a.createElement(r.a.Fragment,null,r.a.createElement(A.a,{bottomOffset:-300,onEnter:function(){b(!1)},onLeave:function(){b(!0)}}),r.a.createElement("div",{className:d.root},r.a.createElement(U.a,{position:"static",className:L()(d.headerBar,{active:u})},r.a.createElement("div",{className:"".concat(d.headerBg," bg")}),f&&r.a.createElement(ue,{open:o,handleClose:O(!1)}),r.a.createElement(D.a,{className:d.headerToolbar},f&&r.a.createElement(W.a,{edge:"start",className:d.menuButton,color:"default","aria-label":"menu",onClick:O(!0)},r.a.createElement(K.a,{className:d.whiteBtn})),!f&&r.a.createElement(m.b,{to:"/",style:{textDecoration:"none"}},r.a.createElement($.a,null,r.a.createElement(P.a,{variant:"h6",className:d.whiteBtn},r.a.createElement("img",{src:ee.a,alt:"Logo",className:d.logo})))),!f&&r.a.createElement(re,null),r.a.createElement("div",{className:d.loginWrapper},r.a.createElement(V,null),h.isAuth?r.a.createElement($.a,{className:d.whiteBtn,onClick:g},"Logout"):r.a.createElement("div",{className:d.signLang},!f&&r.a.createElement(m.b,{to:"/register",style:{textDecoration:"none"}},r.a.createElement($.a,{className:d.whiteBtn},t("header.register"))),r.a.createElement(m.b,{to:"/login",style:{textDecoration:"none"}},r.a.createElement($.a,{className:d.notwhiteBtn},t("header.sign-in")))))))))})),pe=Object(d.a)((function(e){return{root:Object(y.a)({position:"fixed",top:0,left:0,width:"100%",zIndex:250,alignContent:"center",margin:"auto"},e.breakpoints.down("xs"),{minWidth:360,height:143}),headerBar:{position:"relative",backgroundColor:"transparent",boxShadow:"none",paddingTop:22,"&.active":{"& > .bg":{opacity:1},paddingTop:2},"&:before":{content:'""',position:"absolute",left:0,right:0,width:"100%",height:"100%"}},headerBg:{position:"absolute",left:0,top:0,width:"100%",height:"100%",backgroundColor:e.palette.common.darkBlue,opacity:0,transition:"0.3s",minHeight:50},headerToolbar:Object(w.a)(Object(w.a)({},e.mixins.container),{},{justifyContent:"space-between"}),menuButton:{marginRight:e.spacing(2),"& .MuiIconButton-label":{"& .MuiSvgIcon-root":{fontSize:30}}},signLang:Object(y.a)({},e.breakpoints.down("xs"),{margin:0}),whiteBtn:{color:e.palette.common.white,fontSize:14},notwhiteBtn:Object(y.a)({color:e.palette.common.white,backgroundColor:e.palette.common.blue,fontSize:14,padding:"10px 1px 12px",marginLeft:28,width:106,height:38},e.breakpoints.down("xs"),{marginLeft:0}),logo:Object(y.a)({paddingTop:5,height:65,boxSizing:"border-box",backgroundSize:"cover",position:"relative"},e.breakpoints.down("xs"),{height:55}),loginWrapper:{display:"flex",alignItems:"center"}}})),de=me,fe=n(365),ge=n(366),Oe=n(193),je=n.n(Oe),ve=n(194),Ee=n.n(ve),ke=n(192),we=n.n(ke),ye=n(191),xe=n.n(ye),Te=Object(d.a)((function(e){return{footer:Object(y.a)({paddingTop:55,paddingBottom:59,backgroundColor:e.palette.common.darkBlue,padding:20},e.breakpoints.down("xs"),{paddingBottom:29}),root:Object(y.a)({display:"flex",alignItems:"flex-start",justifyContent:"space-between",flexWrap:"wrap",backgroundColor:e.palette.common.darkBlue,color:e.palette.common.white,padding:"0 24px"},e.breakpoints.down("xs"),{flexWrap:"wrap"}),logoContainer:Object(y.a)({},e.breakpoints.down("sm"),{width:"100%"}),logo:Object(y.a)({position:"relative",width:99,height:80,boxSizing:"border-box",backgroundSize:"cover",margin:"0 auto 25px"},e.breakpoints.down("xs"),{margin:"0 108px 28px"}),ftitle:Object(y.a)({color:e.palette.common.grey2,fontSize:14,width:"100%",marginLeft:0,marginTop:25},e.breakpoints.down("xs"),{marginBottom:0,margin:"auto",textAlign:"center"}),menu:{position:"relative",color:e.palette.common.ultraLightGrey2},title:{fontSize:12,fontWeight:"bold",marginBottom:12},btn:{fontSize:14,listStyle:"none",marginTop:8},contacts:{fontSize:14,listStyle:"none",marginTop:8,"& > a":{display:"flex",alignItems:"center",color:e.palette.common.ultraLightGrey2}},iconWrapper:Object(y.a)({display:"flex",margin:"auto"},e.breakpoints.down("xs"),{display:"flex",width:"100%",alignItems:"center",justifyContent:"center",margin:"auto"}),socialIcon:Object(y.a)({marginTop:25,border:"solid 1px ".concat(e.palette.common.ultraLightGrey2),padding:3,borderRadius:"50%",marginRight:10,"&:last-item":{marginRight:0}},e.breakpoints.down("xs"),{marginTop:20,padding:5,alignItems:"center",width:33,height:33,marginBottom:22}),icons:{padding:3,borderRadius:"50%"}}})),Se=function(){var e=Te();return r.a.createElement("footer",{className:e.footer},r.a.createElement(fe.a,{maxWidth:"lg",className:e.root},r.a.createElement("div",{className:e.logoContainer},r.a.createElement(ge.a,{image:ee.a,className:e.logo})),r.a.createElement("div",{className:e.menu},r.a.createElement("h3",{className:e.title},"MENU"),r.a.createElement("ul",null,r.a.createElement("li",{className:e.btn},"Home"),r.a.createElement("li",{className:e.btn},"About"),r.a.createElement("li",{className:e.btn},"Services"),r.a.createElement("li",{className:e.btn},"News"),r.a.createElement("li",{className:e.btn},"Gallery"),r.a.createElement("li",{className:e.btn},"Contact"))),r.a.createElement("div",{className:e.menu},r.a.createElement("h3",{className:e.title},"SERVICES"),r.a.createElement("ul",null,r.a.createElement("li",{className:e.btn},"Virtual exhibition"),r.a.createElement("li",{className:e.btn},"Online conference"),r.a.createElement("li",{className:e.btn},"Market place"),r.a.createElement("li",{className:e.btn},"Traditional exhibition"))),r.a.createElement("div",{className:e.menu},r.a.createElement("h3",{className:e.title},"CONTACT US"),r.a.createElement("ul",null,r.a.createElement("li",{className:e.contacts},r.a.createElement("a",{href:"mailto: nurislam.ashirmatov@yandex.ru",rel:"noopener noreferrer",target:"_blank"},r.a.createElement(xe.a,{fontSize:"small",className:e.icons})," nurislam.ashirmatov@yandex.ru")),r.a.createElement("li",{className:e.contacts},r.a.createElement("a",{href:"tel: +8613249720671",rel:"noopener noreferrer",target:"_blank"},r.a.createElement(we.a,{fontSize:"small",className:e.icons})," +8 613 249 72 0671"))),r.a.createElement("div",{className:e.iconWrapper},r.a.createElement(je.a,{fontSize:"default",className:e.socialIcon}),r.a.createElement(Ee.a,{fontSize:"default",className:e.socialIcon}))),r.a.createElement(P.a,{color:"inherit",className:e.ftitle},"\xa9 ",(new Date).getFullYear()," Tantora. All rights reserved.")))},Ne=Object(g.a)((function(){return Promise.all([n.e(4),n.e(5)]).then(n.bind(null,444))}),{fallback:r.a.createElement(k.a,null)}),_e=Object(g.a)((function(){return n.e(8).then(n.bind(null,448))}),{fallback:r.a.createElement(k.a,null)}),Ce=Object(g.a)((function(){return n.e(9).then(n.bind(null,442))}),{fallback:r.a.createElement(k.a,null)}),Ie=Object(g.a)((function(){return Promise.all([n.e(0),n.e(11)]).then(n.bind(null,437))}),{fallback:r.a.createElement(k.a,null)}),ze=Object(g.a)((function(){return n.e(10).then(n.bind(null,438))}),{fallback:r.a.createElement(k.a,null)}),Re=Object(g.a)((function(){return Promise.all([n.e(0),n.e(13)]).then(n.bind(null,439))}),{fallback:r.a.createElement(k.a,null)}),Ae=Object(g.a)((function(){return Promise.all([n.e(0),n.e(12)]).then(n.bind(null,446))}),{fallback:r.a.createElement(k.a,null)}),Be=Object(g.a)((function(){return n.e(6).then(n.bind(null,447))}),{fallback:r.a.createElement(k.a,null)}),Le=Object(g.a)((function(){return n.e(7).then(n.bind(null,443))}),{fallback:r.a.createElement(k.a,null)}),Ue=Object(f.a)((function(){var e=De(),t=j.a.authStore;return Object(a.useEffect)((function(){t.fetchMe()}),[t.authToken]),r.a.createElement(b.a,{client:v.a},r.a.createElement(E.a,null,r.a.createElement(h.a,{theme:O.a},r.a.createElement(m.a,null,r.a.createElement(de,null),r.a.createElement("main",{className:e.main},r.a.createElement(p.d,null,r.a.createElement(p.b,{path:"/",exact:!0},r.a.createElement(Ne,null)),r.a.createElement(p.b,{path:"/exhibitions"},r.a.createElement(_e,null)),r.a.createElement(p.b,{path:"/exhibition"},r.a.createElement(Ce,null)),r.a.createElement(p.b,{path:"/admins"},r.a.createElement(ze,null)),r.a.createElement(p.b,{path:"/login"},r.a.createElement(Ie,null)),r.a.createElement(p.b,{path:"/register"},r.a.createElement(Re,null)),r.a.createElement(p.b,{path:"/messages"},r.a.createElement(Ae,null)),r.a.createElement(p.b,{path:"/visitors"},r.a.createElement(Be,null)),r.a.createElement(p.b,{path:"/exhibitors"},r.a.createElement(Le,null)))),r.a.createElement(Se,null)))))})),De=Object(d.a)({main:{minHeight:"calc(100vh - 70px)"}}),Pe=Ue;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(Pe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},45:function(e,t,n){"use strict";var a=n(0),r=n.n(a),i=n(314),o=n(315),c=Object(i.a)({root:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"}});t.a=function(){var e=c();return r.a.createElement("div",{className:e.root},r.a.createElement(o.a,null))}},62:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(0),r=n.n(a),i=n(85),o=Object(a.createContext)(i.a),c=function(e){var t=e.children;return r.a.createElement(o.Provider,{value:i.a},t)};t.b=function(){var e=Object(a.useContext)(o);if(!e)throw new Error("Define `StoreProvider` higher up in the tree");return e}},71:function(e,t,n){e.exports=n.p+"static/media/icon.3daa1afa.png"},72:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var a,r,i=n(11),o=n(32),c=n(56),l=n(10),s=(n(64),n(7)),u=n(84),b=Object.freeze({en:"en",ru:"ru",cn:"cn"}),h=(a=function(){function e(){var t=this;Object(o.a)(this,e),Object(i.a)(this,"_lang",r,this),Object(s.reaction)((function(){return t._lang}),(function(e){u.a.changeLanguage(e)}))}return Object(c.a)(e,[{key:"setLang",value:function(e){this._lang=e}},{key:"lang",get:function(){return this._lang}}]),e}(),r=Object(l.a)(a.prototype,"_lang",[s.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return b.en}}),Object(l.a)(a.prototype,"lang",[s.computed],Object.getOwnPropertyDescriptor(a.prototype,"lang"),a.prototype),Object(l.a)(a.prototype,"setLang",[s.action],Object.getOwnPropertyDescriptor(a.prototype,"setLang"),a.prototype),a);t.b=h},85:function(e,t,n){"use strict";var a,r,i,o,c,l,s,u,b,h,m=n(32),p=n(56),d=n(72),f=n(21),g=n.n(f),O=n(38),j=n(11),v=n(10),E=(n(64),n(41)),k=n(34),w=n(7),y=n(143),x=n.n(y),T=n(46),S=n.n(T);function N(){var e=Object(E.a)(["\n  mutation($refreshToken: String!) {\n    refreshToken(refreshToken: $refreshToken) {\n      token {\n        accessToken\n        refreshToken\n      }\n    }\n  }\n"]);return N=function(){return e},e}function _(){var e=Object(E.a)(["\n  query {\n    me {\n      userId\n      userName\n      firstName\n      lastName\n      email\n      phone\n      dateOfBirth\n      isActive\n    }\n  }\n"]);return _=function(){return e},e}var C,I,z,R,A,B,L,U,D,P,$,W,H,K,F,M,G,q=Object(k.b)(_()),J=Object(k.b)(N()),V=Object.freeze({AUTH_TOKEN:"authToken",REFRESH_TOKEN:"refreshToken"}),Z=(a=function(){function e(t){Object(m.a)(this,e),this.appClient=t,Object(j.a)(this,"_authToken",r,this),Object(j.a)(this,"_refreshToken",i,this),Object(j.a)(this,"_user",o,this),Object(j.a)(this,"clear",c,this),Object(j.a)(this,"setAuthToken",l,this),Object(j.a)(this,"setRefreshToken",s,this),Object(j.a)(this,"setUser",u,this),Object(j.a)(this,"fetchMe",b,this),Object(j.a)(this,"refreshAccessToken",h,this);var n=localStorage.getItem(V.AUTH_TOKEN),a=localStorage.getItem(V.REFRESH_TOKEN);this._authToken=n||"",this._refreshToken=a||""}return Object(p.a)(e,[{key:"isAuth",get:function(){return!x()(this._authToken)&&null!==this.user}},{key:"user",get:function(){return this._user}},{key:"authToken",get:function(){var e=localStorage.getItem(V.AUTH_TOKEN)||"";return this._authToken||e}},{key:"refreshToken",get:function(){var e=localStorage.getItem(V.REFRESH_TOKEN)||"";return this._refreshToken||e}}]),e}(),r=Object(v.a)(a.prototype,"_authToken",[w.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),i=Object(v.a)(a.prototype,"_refreshToken",[w.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o=Object(v.a)(a.prototype,"_user",[w.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(v.a)(a.prototype,"isAuth",[w.computed],Object.getOwnPropertyDescriptor(a.prototype,"isAuth"),a.prototype),Object(v.a)(a.prototype,"user",[w.computed],Object.getOwnPropertyDescriptor(a.prototype,"user"),a.prototype),Object(v.a)(a.prototype,"authToken",[w.computed],Object.getOwnPropertyDescriptor(a.prototype,"authToken"),a.prototype),Object(v.a)(a.prototype,"refreshToken",[w.computed],Object.getOwnPropertyDescriptor(a.prototype,"refreshToken"),a.prototype),c=Object(v.a)(a.prototype,"clear",[w.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e._authToken="",e._refreshToken="",e._user=null,localStorage.removeItem(V.AUTH_TOKEN),localStorage.removeItem(V.REFRESH_TOKEN)}}}),l=Object(v.a)(a.prototype,"setAuthToken",[w.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){localStorage.setItem(V.AUTH_TOKEN,t),e._authToken=t}}}),s=Object(v.a)(a.prototype,"setRefreshToken",[w.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){localStorage.setItem(V.REFRESH_TOKEN,t),e._refreshToken=t}}}),u=Object(v.a)(a.prototype,"setUser",[w.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e._user=t}}}),b=Object(v.a)(a.prototype,"fetchMe",[w.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(O.a)(g.a.mark((function t(){var n,a;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.refreshToken){t.next=16;break}return t.prev=1,t.next=4,e.appClient.query({query:q});case 4:n=t.sent,a=n.data.me,e.setUser(a),t.next=14;break;case 9:return t.prev=9,t.t0=t.catch(1),t.next=13,e.refreshAccessToken();case 13:e.fetchMe();case 14:t.next=17;break;case 16:e.clear();case 17:case"end":return t.stop()}}),t,null,[[1,9]])})))}}),h=Object(v.a)(a.prototype,"refreshAccessToken",[w.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(O.a)(g.a.mark((function t(){var n,a,r,i;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.refreshToken){t.next=14;break}return t.prev=1,t.next=4,e.appClient.mutate({mutation:J,variables:{refreshToken:e.refreshToken}});case 4:n=t.sent,a=n.data,r=S()(a,"refreshToken.token.accessToken",null),i=S()(a,"refreshToken.token.refreshToken",null),r&&i?(e.setAuthToken(r),e.setRefreshToken(i)):e.clear(),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),e.clear();case 14:case"end":return t.stop()}}),t,null,[[1,11]])})))}}),a),Q=n(112),Y=(C=function e(t,n){var a=this;Object(m.a)(this,e),this.authStore=t,this.socket=n,Object(j.a)(this,"chats",I,this),Object(j.a)(this,"friends",z,this),Object(j.a)(this,"recentChats",R,this),this.init=Object(O.a)(g.a.mark((function e(){var t,n,r,i,o,c,l,s,u;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.when)((function(){return void 0!==a.socket}));case 2:return e.next=4,Object(w.when)((function(){return a.authStore.isAuth}));case 4:null===(t=a.socket)||void 0===t||t.emit("get recent",null===(n=a.authStore.user)||void 0===n?void 0:n.userId),null===(r=a.socket)||void 0===r||r.emit("get friends",null===(i=a.authStore.user)||void 0===i?void 0:i.userId),null===(o=a.socket)||void 0===o||o.on("recent messages",a.handleRecents),null===(c=a.socket)||void 0===c||c.on("friends",a.handleFriends),null===(l=a.socket)||void 0===l||l.on("user joined",a.handleUserJoin),null===(s=a.socket)||void 0===s||s.on("new message",a.handleNewMessage),null===(u=a.socket)||void 0===u||u.on("messages list",a.handleNewMessages);case 11:case"end":return e.stop()}}),e)}))),Object(j.a)(this,"handleEnterChat",A,this),Object(j.a)(this,"handleNewMessages",B,this),Object(j.a)(this,"handleNewMessage",L,this),Object(j.a)(this,"handleUserJoin",U,this),Object(j.a)(this,"handleRecents",D,this),Object(j.a)(this,"handleFriends",P,this),Object(j.a)(this,"handleSend",$,this),this.init()},I=Object(v.a)(C.prototype,"chats",[w.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return w.observable.map([])}}),z=Object(v.a)(C.prototype,"friends",[w.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),R=Object(v.a)(C.prototype,"recentChats",[w.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),A=Object(v.a)(C.prototype,"handleEnterChat",[w.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(O.a)(g.a.mark((function t(n,a,r){var i,o,c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(w.when)((function(){return void 0!==e.socket}));case 2:return t.next=4,Object(w.when)((function(){return e.authStore.isAuth}));case 4:null===(i=e.socket)||void 0===i||i.emit("enter chat",{userName:null===(o=e.authStore.user)||void 0===o?void 0:o.userName,userId:null===(c=e.authStore.user)||void 0===c?void 0:c.userId,receiverId:n,receiverName:a,room:r});case 5:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}()}}),B=Object(v.a)(C.prototype,"handleNewMessages",[w.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var n=e.chats.get(t.userName)||[];e.chats.set(t.userName,[].concat(Object(Q.a)(n),Object(Q.a)(t.messages)))}}}),L=Object(v.a)(C.prototype,"handleNewMessage",[w.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var n,a=t.senderId===(null===(n=e.authStore.user)||void 0===n?void 0:n.userId)?t.receiverName:t.senderName,r=e.chats.get(a)||[];e.chats.set(a,[].concat(Object(Q.a)(r),[t]))}}}),U=Object(v.a)(C.prototype,"handleUserJoin",[w.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(e){}}}),D=Object(v.a)(C.prototype,"handleRecents",[w.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.recentChats=t}}}),P=Object(v.a)(C.prototype,"handleFriends",[w.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.friends=t}}}),$=Object(v.a)(C.prototype,"handleSend",[w.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var n;null===(n=e.socket)||void 0===n||n.emit("new message",t)}}}),C);function X(){var e=Object(E.a)(["\n  query($userName: String!, $password: String!) {\n    loginUser(userName: $userName, password: $password) {\n      token {\n        refreshToken\n        accessToken\n      }\n    }\n  }\n"]);return X=function(){return e},e}var ee,te,ne,ae,re,ie=Object(k.b)(X()),oe=(W=function e(t,n){Object(m.a)(this,e),this.appClient=t,this.authStore=n,Object(j.a)(this,"loading",H,this),Object(j.a)(this,"error",K,this),Object(j.a)(this,"setLoading",F,this),Object(j.a)(this,"setError",M,this),Object(j.a)(this,"handleLogin",G,this)},H=Object(v.a)(W.prototype,"loading",[w.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),K=Object(v.a)(W.prototype,"error",[w.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=Object(v.a)(W.prototype,"setLoading",[w.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.loading=t}}}),M=Object(v.a)(W.prototype,"setError",[w.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.error=t}}}),G=Object(v.a)(W.prototype,"handleLogin",[w.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(O.a)(g.a.mark((function t(n,a){var r,i;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.authStore.isAuth){t.next=17;break}return e.setLoading(!0),e.setError(null),t.prev=3,t.next=6,e.appClient.query({query:ie,variables:{userName:n,password:a}});case 6:r=t.sent,i=r.data,e.authStore.setAuthToken(S()(i,"loginUser.token.accessToken")),e.authStore.setRefreshToken(S()(i,"loginUser.token.refreshToken")),e.setLoading(!1),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(3),e.setError(t.t0),e.setLoading(!1);case 17:case"end":return t.stop()}}),t,null,[[3,13]])})));return function(e,n){return t.apply(this,arguments)}}()}}),W),ce=n(153),le=n(106),se=n(185),ue=n.n(se),be=n(107),he=(re=ae=function(){function e(){Object(m.a)(this,e),Object(j.a)(this,"_io",te,this),Object(j.a)(this,"connect",ne,this)}return Object(p.a)(e,[{key:"io",get:function(){return this._io}}]),e}(),ae._instance=null,ae.getInstance=function(){if(he._instance)return he._instance;var e=new he;return he._instance=e,e},ee=re,te=Object(v.a)(ee.prototype,"_io",[w.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(v.a)(ee.prototype,"io",[w.computed],Object.getOwnPropertyDescriptor(ee.prototype,"io"),ee.prototype),ne=Object(v.a)(ee.prototype,"connect",[w.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){void 0===e._io&&(e._io=ue()(be.a.chatUrl+(t?"/".concat(t):"")))}}}),ee),me=function(){function e(t,n){Object(m.a)(this,e),this.appClient=t,this._socket=n,this.appStore=new d.b,this.authStore=new Z(this.appClient),this.chatStore=new Y(this.authStore,this.socket),this.loginStore=new oe(this.appClient,this.authStore),this.registerStore=new ce.b(this.authStore,this.appClient),n.io||n.connect()}return Object(p.a)(e,[{key:"socket",get:function(){return this._socket.io}}]),e}();t.a=new me(le.a,he.getInstance())}},[[203,2,3]]]);
//# sourceMappingURL=main.f655436e.chunk.js.map