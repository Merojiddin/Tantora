{"version":3,"sources":["../node_modules/@material-ui/icons/Person.js","components/Messages/FriendList.tsx","components/Messages/Message.tsx","helpers/roomCreator.ts","components/Messages/index.tsx"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","default","_react","_default","createElement","d","FriendList","observer","classes","useStyles","chatStore","useStore","className","container","Typography","variant","color","List","recentChats","map","idx","userName","userId","key","to","link","ListItem","ListItemIcon","ListItemText","length","Divider","makeStyles","theme","position","width","height","maxWidth","minHeight","padding","palette","common","white","backgroundColor","secondary","main","display","transition","transform","Message","authStore","useState","chatInput","setChatInput","useParams","username","userid","contentRef","useRef","room","receiverName","receiverId","name","id","roomCreator","get","useEffect","handleEnterChat","scrollToBottom","chats","Boolean","current","scrollTop","scrollHeight","Container","title","indicator","content","ref","message","senderId","createdDate","TextField","fullWidth","focused","label","placeholder","onChange","e","target","onKeyDown","handleSend","online","paddingTop","alignItems","justifyContent","background","primary","light","marginLeft","borderRadius","flexDirection","borderLeft","margin","overflowY","marginBottom","borderBottom","paddingBottom","fontSize","Messages","exact","path","component","backgroundSize"],"mappings":"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","file":"static/js/12.e4db8b55.chunk.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)(_react.default.createElement(\"path\", {\n  d: \"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z\"\n}), 'Person');\n\nexports.default = _default;","import React, { FC } from 'react';\nimport { Link } from 'react-router-dom';\nimport { observer } from 'mobx-react-lite';\nimport { makeStyles } from '@material-ui/core/styles';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Typography from '@material-ui/core/Typography';\nimport UserIcon from '@material-ui/icons/Person';\nimport Divider from '@material-ui/core/Divider';\n\nimport useStore from 'hooks/useStore';\n\nconst FriendList: FC = observer(() => {\n  const classes = useStyles();\n  const { chatStore } = useStore();\n\n  return (\n    <div className={classes.container}>\n      <Typography variant=\"h6\" color=\"inherit\">\n        Recents\n      </Typography>\n      <List>\n        {chatStore.recentChats.map(({ userName, userId }, idx) => (\n          <Link\n            key={userName}\n            to={`/messages/${userName}/${userId}`}\n            className={classes.link}\n          >\n            <ListItem key={userName}>\n              <ListItemIcon>\n                <UserIcon />\n              </ListItemIcon>\n              <ListItemText>{userName}</ListItemText>\n            </ListItem>\n            {idx < chatStore.recentChats.length - 1 && <Divider />}\n          </Link>\n        ))}\n      </List>\n    </div>\n  );\n});\n\nconst useStyles = makeStyles((theme) => ({\n  container: {\n    position: 'relative',\n    width: '100%',\n    height: '100%',\n    maxWidth: 300,\n    minHeight: '100vh',\n    padding: '90px 25px',\n    color: theme.palette.common.white,\n    backgroundColor: theme.palette.secondary.main,\n  },\n  link: {\n    display: 'block',\n    color: theme.palette.common.white,\n    transition: '.3s',\n\n    '&:hover': {\n      transform: 'scale(1.1)',\n    },\n  },\n}));\n\nexport default FriendList;\n","import React, {\n  FC,\n  useEffect,\n  useState,\n  useRef,\n  ChangeEventHandler,\n  KeyboardEventHandler,\n} from 'react';\nimport get from 'lodash/get';\nimport { useParams } from 'react-router-dom';\nimport { observer } from 'mobx-react-lite';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\n\nimport useStore from 'hooks/useStore';\nimport roomCreator from 'helpers/roomCreator';\n\nconst Message: FC = observer(() => {\n  const { authStore, chatStore } = useStore();\n  const [chatInput, setChatInput] = useState('');\n  const { username, userid } = useParams<{\n    username: string;\n    userid: string;\n  }>();\n  const contentRef = useRef(null);\n  const classes = useStyles(false)();\n\n  const room = roomCreator(\n    get(authStore, 'user.userName', ''),\n    username,\n    get(authStore, 'user.userId', ''),\n    userid\n  );\n\n  useEffect(() => {\n    chatStore.handleEnterChat(userid, username, room);\n  }, [username, userid]);\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [chatStore.chats.get(username)]);\n\n  const scrollToBottom = () => {\n    if (Boolean(contentRef) && Boolean(contentRef.current)) {\n      (contentRef.current as any).scrollTop = (contentRef.current as any).scrollHeight;\n    }\n  };\n\n  const handleInputChange: ChangeEventHandler<HTMLInputElement> = (e) => {\n    setChatInput(e.target.value);\n  };\n\n  const handleKeyPress: KeyboardEventHandler<HTMLInputElement> = (e) => {\n    if (e.key === 'Enter') {\n      chatStore.handleSend(chatInput);\n      setChatInput('');\n    }\n  };\n\n  return (\n    <Container maxWidth=\"xl\" className={classes.container}>\n      <Typography className={classes.title}>\n        {username} <span className={classes.indicator} />\n      </Typography>\n      <div className={classes.content} ref={contentRef}>\n        {(chatStore.chats.get(username) || []).map((message, idx) => (\n          <div key={idx} className=\"wrapper\">\n            <div className=\"header\">\n              <span className=\"username\">{message.senderId}</span>\n              <span className=\"time\">{message.createdDate}</span>\n            </div>\n            <p className=\"text\">{message.content}</p>\n          </div>\n        ))}\n      </div>\n      <TextField\n        variant=\"outlined\"\n        fullWidth={true}\n        focused={true}\n        value={chatInput}\n        label=\"Click Enter\"\n        placeholder=\"Text here...\"\n        onChange={handleInputChange}\n        onKeyDown={handleKeyPress}\n      />\n    </Container>\n  );\n});\n\nconst useStyles = (online: boolean) =>\n  makeStyles((theme) => ({\n    container: {\n      paddingTop: 75,\n    },\n    title: {\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'flex-start',\n      width: '100%',\n      color: theme.palette.common.white,\n      background: theme.palette.primary.light,\n      padding: '25px 50px',\n    },\n    indicator: {\n      width: 7,\n      height: 7,\n      marginLeft: 15,\n      borderRadius: '50%',\n      backgroundColor: online\n        ? theme.palette.primary.light\n        : theme.palette.secondary.light,\n    },\n    content: {\n      display: 'flex',\n      alignItems: 'flex-start',\n      justifyContent: 'flex-start',\n      flexDirection: 'column',\n      height: 'calc(100vh - 275px)',\n      width: '100%',\n      borderLeft: `1px solid ${theme.palette.secondary.main}`,\n      padding: 25,\n      margin: '25px 0',\n      overflowY: 'scroll',\n\n      '& .wrapper': {\n        display: 'flex',\n        flexDirection: 'column',\n        width: '100%',\n        color: theme.palette.common.white,\n        background: theme.palette.secondary.light,\n        borderRadius: 5,\n        padding: '15px 20px 10px',\n        marginBottom: 25,\n\n        '&:last-child': {\n          marginBottom: 0,\n        },\n      },\n      '& .header': {\n        display: 'flex',\n        justifyContent: 'space-between',\n        width: '100%',\n        borderBottom: `1px solid ${theme.palette.common.white}`,\n        paddingBottom: 10,\n      },\n      '& .username': {\n        fontSize: 18,\n      },\n      '& .time': {\n        fontSize: 15,\n      },\n      '& .text': {\n        fontSize: 16,\n      },\n    },\n  }));\n\nexport default Message;\n","export default (\n  userName: string,\n  receiverName: string,\n  userId: string,\n  receiverId: string\n): string => {\n  const name =\n    userName < receiverName\n      ? `${userName}-${receiverName}`\n      : `${receiverName}-${userName}`;\n  const id =\n    userId < receiverId ? `${userId}-${receiverId}` : `${receiverId}-${userId}`;\n\n  return `${name}:${id}`;\n};\n","import React from 'react';\nimport { Route } from 'react-router-dom';\nimport { observer } from 'mobx-react-lite';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport FriendList from 'components/Messages/FriendList';\nimport Message from 'components/Messages/Message';\n\nconst Messages = observer(() => {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.container}>\n      <FriendList />\n      <Route\n        exact={true}\n        path=\"/messages/:username/:userid\"\n        component={() => <Message />}\n      />\n    </div>\n  );\n});\n\nconst useStyles = makeStyles(() => ({\n  container: {\n    position: 'relative',\n    display: 'flex',\n    alignItems: 'flex-start',\n    justifyContent: 'flex-start',\n    width: '100%',\n    height: '100%',\n    minHeight: '100vh',\n    backgroundSize: 'cover',\n  },\n}));\n\nexport default Messages;\n"],"sourceRoot":""}